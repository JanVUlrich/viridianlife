---
import { SITE_TITLE } from "../consts";
import Sitenav from "./Sitenav.astro";
---

<header class="site-header site-header-static" id="site-header" role="banner">
	<div class="container">
		<a class="site-header-title" href="/">
			<div class="site-header-title__logo">
			  <img src="/png/logo_small.png" class="" />
			</div>
			<div class="site-header-title__name">
			  {SITE_TITLE }
			</div>
		  </a>
		<button id="site-nav-toggle" class="site-nav-button">
			<span class="label-default"> Menu =</span>
			<span class="label-toggled"> Close &times;</span>
		</button>
	</div>

	<div id="site-nav" class="site-nav">

		<div class="site-nav__wrap container">
			<button id="site-nav-close" class="site-nav-close">
				<span>Close</span>
				<span>&times;</span>
			</button>

			<div class="site-nav__logo">
				<img src="/png/logo_small.png" class="" />
			</div>

			<Sitenav />
		</div>
	</div>
</header>

<script>
	const navEl = document.getElementById("site-nav");
	const navToggleEl = document.getElementById("site-nav-toggle");
	const navCloseEl = document.getElementById("site-nav-close");
	const headerEl = document.getElementById("site-header");

	const showMenu = () => {
		navEl && navEl.classList.add("is-toggled");
		navToggleEl && navToggleEl.classList.add("is-toggled");
	}
	const closeMenu = () => {
		navEl && navEl.classList.remove("is-toggled");
		navToggleEl && navToggleEl.classList.remove("is-toggled");
	}

	if (navToggleEl && navCloseEl) {
		navToggleEl.addEventListener("click", showMenu)
		navCloseEl.addEventListener("click", closeMenu)
	}

	if (headerEl) {
		document.addEventListener("scroll", function () {
			if (document.body.getBoundingClientRect().y < -20) {
				headerEl.classList.add("is-scrolled");
			} else {
				headerEl.classList.remove("is-scrolled");
			}
		});
	}
</script>
